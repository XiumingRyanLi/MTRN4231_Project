<?xml version="1.0"?>
<robot name="ur5e" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <!-- args expected by ur_description -->
  <xacro:arg name="name"                 default="ur5e"/>
  <xacro:arg name="ur_type"              default="ur5e"/>
  <xacro:arg name="use_fake_hardware"    default="true"/>
  <xacro:arg name="prefix"               default=""/>
  <xacro:arg name="visual_parameters_file"
             default="/opt/ros/humble/share/ur_description/config/ur5/visual_parameters.yaml"/>

  <!-- bring in the official UR model -->
  <xacro:include filename="$(find ur_description)/urdf/ur.urdf.xacro"/>
  <xacro:ur_robot
      name="$(arg name)"
      ur_type="$(arg ur_type)"
      prefix="$(arg prefix)"
      kinematics_parameters_file=""
      physical_parameters_file=""
      visual_parameters_file="$(arg visual_parameters_file)"
      transmission_hw_interface="hardware_interface/PositionJointInterface"
      use_fake_hardware="$(arg use_fake_hardware)"
      safety_limits="false" safety_pos_margin="0.0" safety_k_position="0.0" />

  <!-- === End-effector: simple block mounted on tool0 === -->
  <link name="${prefix}ee_adapter"/>
  <joint name="${prefix}tool0_to_ee_adapter" type="fixed">
    <parent link="${prefix}tool0"/>
    <child  link="${prefix}ee_adapter"/>
    <origin xyz="0 0 0.0" rpy="0 0 0"/>
  </joint>

  <link name="${prefix}gripper_base">
    <visual>
      <origin xyz="0 0 0.08" rpy="0 0 0"/>
      <geometry><box size="0.04 0.06 0.16"/></geometry>
      <material name="gray"><color rgba="0.7 0.7 0.7 1.0"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.08" rpy="0 0 0"/>
      <geometry><box size="0.04 0.06 0.16"/></geometry>
    </collision>
    <inertial>
      <origin xyz="0 0 0.08" rpy="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="${prefix}ee_adapter_to_gripper" type="fixed">
    <parent link="${prefix}ee_adapter"/>
    <child  link="${prefix}gripper_base"/>
    <origin xyz="0 0 0.0" rpy="0 0 0"/>
  </joint>

  <!-- Optional TCP alias a bit below the block tip -->
  <link name="${prefix}tcp_link"/>
  <joint name="${prefix}gripper_to_tcp" type="fixed">
    <parent link="${prefix}gripper_base"/>
    <child  link="${prefix}tcp_link"/>
    <origin xyz="0 0 0.18" rpy="0 0 0"/>
  </joint>

</robot>
